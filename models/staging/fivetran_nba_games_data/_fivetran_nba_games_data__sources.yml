version: 2

sources:
  - name: _fivetran_nba_games_data # name of the source
    schema: FIVETRAN_NBA_GAMES_DATA # this is the schema our raw data lives in
    database: ALUMNO28_NBA_BRONZE_DB # this is the name of our database

    quoting:
      database: false
      schema: false
      identifier: false

    tables:
      - name: games

        columns:
          - name: _fivetran_id
            description: "Unique identifier generated by Fivetran."
          - name: team_id_home
            description: "Identifier for the home team."
            tests:
              - not_null
          - name: team_id_away
            description: "Identifier for the away team."
            tests:
              - not_null
          - name: ft_pct_away
            description: "Free throw percentage for the away team."
          - name: FT_PCT_HOME
            description: "Free throw percentage for the home team."
          - name: REB_HOME
            description: "Total rebounds for the home team."
          - name: FG_PCT_HOME
            description: "Field goal percentage for the home team."
          - name: FG3_PCT_HOME
            description: "Three-point field goal percentage for the home team."
          - name: FG_PCT_AWAY
            description: "Field goal percentage for the away team."
          - name: ast_home
            description: "Total assists for the home team."
          - name: game_id
            description: "Unique identifier for the game."
            tests:
              - not_null
              - unique
          - name: fg3_pct_away
            description: "Three-point field goal percentage for the away team."
          - name: ast_away
            description: "Total assists for the away team."
          - name: game_status_text
            description: "Status text of the game."
          - name: reb_away
            description: "Total rebounds for the away team."
          - name: season
            description: "Season in which the game was played."
          - name: pts_away
            description: "Total points scored by the away team."
          - name: pts_home
            description: "Total points scored by the home team."
          - name: game_date_est
            description: "Game date in EST."
          - name: home_team_id
            description: "Identifier for the home team (duplicate column)."
          - name: home_team_wins
            description: "Indicator if the home team won the game."
          - name: visitor_team_id
            description: "Identifier for the visiting team (duplicate column)."
          - name: _fivetran_deleted
            description: "Indicator if the record was deleted by Fivetran."
          - name: _fivetran_synced
            description: "Timestamp when the record was last synced by Fivetran."

      - name: games_details
        columns:
          - name: _FIVETRAN_ID
          - name: TEAM_ID
          - name: FTM
          - name: FGM
          - name: MIN
          - name: FG_PCT
          - name: BLK
          - name: PLAYER_ID
          - name: START_POSITION
          - name: DREB
          - name: AST
          - name: PTS
          - name: REB
          - name: NICKNAME
          - name: OREB
          - name: PF
          - name: STL
          - name: FG3A
          - name: FTA
          - name: COMMENT
          - name: PLAYER_NAME
          - name: TOS
          - name: TEAM_ABBREVIATION
          - name: FGA
          - name: TEAM_CITY
          - name: FG3M
          - name: GAME_ID
          - name: PLUS_MINUS
          - name: FG3_PCT
          - name: FT_PCT
          - name: _FIVETRAN_DELETED
          - name: _FIVETRAN_SYNCED

      - name: players
        loaded_at_field: _fivetran_synced
        columns:
          - name: _FIVETRAN_ID
          - name: TEAM_ID
          - name: SEASON
          - name: PLAYER_NAME
          - name: PLAYER_ID
          - name: _FIVETRAN_DELETED
          - name: _FIVETRAN_SYNCED

      - name: ranking
        loaded_at_field: _fivetran_synced
        columns:
          - name: _FIVETRAN_ID
          - name: L
          - name: TEAM_ID
          - name: ROAD_RECORD
          - name: RETURNTOPLAY
          - name: STANDINGSDATE
          - name: HOME_RECORD
          - name: W
          - name: SEASON_ID
          - name: TEAM
          - name: G
          - name: CONFERENCE
          - name: W_PCT
          - name: LEAGUE_ID
          - name: _FIVETRAN_DELETED
          - name: _FIVETRAN_SYNCED

      - name: teams
        loaded_at_field: _fivetran_synced
        columns:
          - name: _FIVETRAN_ID
          - name: MAX_YEAR
          - name: GENERALMANAGER
          - name: OWNER
          - name: CITY
          - name: ARENACAPACITY
          - name: YEARFOUNDED
          - name: ARENA
          - name: TEAM_ID
          - name: LEAGUE_ID
          - name: MIN_YEAR
          - name: HEADCOACH
          - name: NICKNAME
          - name: DLEAGUEAFFILIATION
          - name: ABBREVIATION
          - name: _FIVETRAN_DELETED
          - name: _FIVETRAN_SYNCED
